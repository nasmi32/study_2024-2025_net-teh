---
## Front matter
title: "Отчёт по лабораторной работе №8"
subtitle: "Дисциплина: Сетевые технологии"
author: "Мишина Анастасия Алексеевна"

## Generic options
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 14pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Изучение принципов маршрутизации в IPv4- и IPv6-сетях и принципов настройки сетевого оборудования.

# Выполнение лабораторной работы

## Настройка динамической маршрутизации в сетях IPv4 и IPv6

Повторяем топологию сети (рис. [-@fig:1]).

![Топология моделируемой сети в GNS3](image/1.png){#fig:1 width=70%}

Присваиваем IPv4-адреса оконечным устройствам PC1 и PC2 в соответствии с данными (рис. [-@fig:2]), (рис. [-@fig:3]).

![Присвоение IPv4-адреса PC1](image/2.png){#fig:2 width=70%}

![Присвоение IPv4-адреса PC2](image/3.png){#fig:3 width=70%}

Настроим IPv4-адреса на интерфейсах маршрутизаторов (рис. [-@fig:4]), (рис. [-@fig:5]), (рис. [-@fig:6]), (рис. [-@fig:7]), (рис. [-@fig:8]).

![Настройка IPv4-адреса на интерфейсе маршрутизатора 1](image/4.png){#fig:4 width=70%}

![Настройка IPv4-адреса на интерфейсе маршрутизатора 1](image/5.png){#fig:5 width=70%}

![Настройка IPv4-адреса на интерфейсе маршрутизатора 2](image/6.png){#fig:6 width=70%}

![Настройка IPv4-адреса на интерфейсе маршрутизатора 3](image/7.png){#fig:7 width=70%}

![Настройка IPv4-адреса на интерфейсе маршрутизатора 4](image/8.png){#fig:8 width=70%}

Присвоим IPv6-адреса оконечным устройствам PC1 и PC2 в соответствии с данными (рис. [-@fig:9]), (рис. [-@fig:10]).

![Присвоение IPv6-адреса PC1](image/9.png){#fig:9 width=70%}

![Присвоение IPv6-адреса PC2](image/10.png){#fig:10 width=70%}

Настроим IPv6-адреса на интерфейсах маршрутизаторов (рис. [-@fig:11]), (рис. [-@fig:12]), (рис. [-@fig:13]), (рис. [-@fig:14]).

![Настройка IPv6-адреса на интерфейсе маршрутизатора 1](image/11.png){#fig:11 width=70%}

![Настройка IPv6-адреса на интерфейсе маршрутизатора 2](image/12.png){#fig:12 width=70%}

![Настройка IPv6-адреса на интерфейсе маршрутизатора 3](image/13.png){#fig:13 width=70%}

![Настройка IPv6-адреса на интерфейсе маршрутизатора 4](image/14.png){#fig:14 width=70%}

### Настройка динамической маршрутизации по протоколу RIP

На маршрутизаторах настроим RIP в качестве протокола динамической
маршрутизации (рис. [-@fig:15]), (рис. [-@fig:16]), (рис. [-@fig:17]), (рис. [-@fig:18]).

![Настройка RIP на маршрутизаторе 1](image/15.png){#fig:15 width=70%}

![Настройка RIP на маршрутизаторе 2](image/16.png){#fig:16 width=70%}

![Настройка RIP на маршрутизаторе 3](image/17.png){#fig:17 width=70%}

![Настройка RIP на маршрутизаторе 4](image/18.png){#fig:18 width=70%}

Убедимся, что маршрутизация по RIP настроена (рис. [-@fig:19]), (рис. [-@fig:20]), (рис. [-@fig:21]), (рис. [-@fig:22]).

![Проверка настройки RIP на маршрутизаторе 1](image/19.png){#fig:19 width=70%}

![Проверка настройки RIP на маршрутизаторе 2](image/20.png){#fig:20 width=70%}

![Проверка настройки RIP на маршрутизаторе 3](image/21.png){#fig:21 width=70%}

![Проверка настройки RIP на маршрутизаторе 4](image/22.png){#fig:22 width=70%}

Проверим пути прохождения пакетов: с PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:23]).

![Команды ping и trace с PC1](image/23.png){#fig:23 width=70%}

Проверим метрики протокола RIP (рис. [-@fig:24]).

![Проверка метрик протокола RIP](image/24.png){#fig:24 width=70%}

Предположим, что пакет проходит через маршрутизатор msk-aamishina-gw-02. Отключим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:25]).

![Отключение на маршрутизаторе 2 интерфейса](image/25.png){#fig:25 width=70%}

Проверим метрики протокола RIP (рис. [-@fig:26]).

![Проверка метрик протокола RIP](image/26.png){#fig:26 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов. Примерное время засечь не удалось, но маршрут восстановился (рис. [-@fig:27]), (рис. [-@fig:28]).

![Команды ping и trace с PC1](image/27.png){#fig:27 width=70%}

![Команды ping и trace с PC1](image/28.png){#fig:28 width=70%}

Включим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:29]).

![Включение на маршрутизаторе 2 интерфейса](image/29.png){#fig:29 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:30]).

![Команды ping и trace с PC1](image/30.png){#fig:30 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:31]), (рис. [-@fig:32]). Видим протокол RIPv2, который использует многоадресную рассылку по адресу 224.0.0.9 для отправки обновлений маршрутизации в отличие от RIPv1, который выполняет рассылку на широковещательный адрес. Протокол использует UDP порт 520. В ответе видим, что роутер изначально делает рассылку о сети 10.0.4.0, затем начинает делать рассылку и о других сетях (рис. [-@fig:33]) 10.0.1.0, 10.0.2.0, 10.0.3.0, 10.0.4.0, 10.0.11.0 с периодичностью в 30 секунд.

![Захваченный трафик Request](image/31.png){#fig:31 width=70%}

![Захваченный трафик Response](image/32.png){#fig:32 width=70%}

![Захваченный трафик Response](image/33.png){#fig:33 width=70%}

На маршрутизаторах настройим RIPng для сетей IPv6 (рис. [-@fig:34]), (рис. [-@fig:35]), (рис. [-@fig:36]), (рис. [-@fig:37]).

![Настройка RIPng для сетей IPv6 на маршрутизаторе 1](image/34.png){#fig:34 width=70%}

![Настройка RIPng для сетей IPv6 на маршрутизаторе 2](image/35.png){#fig:35 width=70%}

![Настройка RIPng для сетей IPv6 на маршрутизаторе 3](image/36.png){#fig:36 width=70%}

![Настройка RIPng для сетей IPv6 на маршрутизаторе 4](image/37.png){#fig:37 width=70%}

Проверим пути прохождения пакетов: с PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:38]).

![Команды ping и trace с PC1](image/38.png){#fig:38 width=70%}

Проверим метрики протокола RIPng (рис. [-@fig:39]).

![Проверка метрики протокола RIPng](image/39.png){#fig:39 width=70%}

Предположим, что пакет проходит через маршрутизатор msk-aamishina-gw-02. Отключим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:40]).

![Отключение интерфейса на маршрутизаторе 2](image/40.png){#fig:40 width=70%}

Проверим метрики протокола RIPng (рис. [-@fig:41]).

![Проверка метрик протокола RIPng](image/41.png){#fig:41 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов. Примерное время засечь не удалось, но маршрут восстановился (рис. [-@fig:42]), (рис. [-@fig:43]).

![Команды ping и trace с PC1](image/42.png){#fig:42 width=70%}

![Команды ping и trace с PC1](image/43.png){#fig:43 width=70%}

Включим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:44]).

![Включение интерфейса на маршрутизаторе 2](image/44.png){#fig:44 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:45]).

![Команды ping и trace с PC1](image/45.png){#fig:45 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:46]), (рис. [-@fig:47]). Видим протокол RIPng, который использует многоадресную рассылку по адресу FF02::9 для отправки обновлений маршрутизации. Протокол использует UDP порт 521. В ответе видим, что роутер делает рассылку о сетях 2001:1::/64, 2001:2::/64, 2001:3::/64, 2001:4::/64, 2001:10::/64, 2001:11::/64 с периодичностью в 30 секунд. Записи таблицы маршрутов, передаваемые протоколом RIPng, содержат префикс маршрута, длину префикса и метрику маршрута.

![Захваченный трафик Response](image/46.png){#fig:46 width=70%}

![Захваченный трафик Response](image/47.png){#fig:47 width=70%}

### Настройка динамической маршрутизации по протоколу OSPF

На маршрутизаторах настроим OSPFv2 для сетей IPv4 (рис. [-@fig:48]), (рис. [-@fig:49]), (рис. [-@fig:50]), (рис. [-@fig:51]).

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 1](image/48.png){#fig:48 width=70%}

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 2](image/49.png){#fig:49 width=70%}

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 3](image/50.png){#fig:50 width=70%}

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 4](image/51.png){#fig:51 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:52]).

![Команды ping и trace с PC1](image/52.png){#fig:52 width=70%}

Проверим таблицу маршрутизации протокола OSPFv2 (рис. [-@fig:53]).

![Проверка таблицы маршрутизации протокола OSPFv2](image/53.png){#fig:53 width=70%}

Предположим, что пакет проходит через маршрутизатор msk-aamishina-gw-02. Отключим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:54]).

![Отключение на маршрутизаторе 2 интерфейса](image/54.png){#fig:54 width=70%}

Проверим таблицу маршрутизации протокола OSPFv2 (рис. [-@fig:55]).

![Проверка таблицы маршрутизации протокола OSPFv2](image/55.png){#fig:55 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов. Примерное время засечь не удалось, но маршрут восстановился (рис. [-@fig:56]).

![Команды ping и trace с PC1](image/56.png){#fig:56 width=70%}

Включим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:57]).

![Включение на маршрутизаторе 2 интерфейса](image/57.png){#fig:57 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:58]).

![Команды ping и trace с PC1](image/58.png){#fig:58 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:59]). Видим протокол OSPF. В OSPF административное расстояние по умолчанию равно 110. В качестве параметра для определения метрики маршрута используется стоимость. По умолчанию за параметр стоимости принимается скорость передачи информации. В сетях IPv4 используется OSPFv2. Для связи между соседями с поддержкой OSPF применяются многоадресные IPv4-адреса 224.0.0.5 и 224.0.0.6 (в нашем случае 224.0.0.5). Перед обменом обновлениями о маршрутах маршрутизаторы OSPF устанавливают отношения соседства. Соседи OSPF обнаруживаются динамически путём отправки сообщений Hello через каждый интерфейс с поддержкой OSPF на маршрутизаторе на адрес 224.0.0.5.

![Захваченный трафик](image/59.png){#fig:59 width=70%}

На маршрутизаторах настроим OSPFv3 для сетей IPv6 (рис. [-@fig:60]), (рис. [-@fig:61]), (рис. [-@fig:62]), (рис. [-@fig:63]).

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 1](image/60.png){#fig:60 width=70%}

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 2](image/61.png){#fig:61 width=70%}

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 3](image/62.png){#fig:62 width=70%}

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 4](image/63.png){#fig:63 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:64]).

![Команды ping и trace с PC1](image/64.png){#fig:64 width=70%}

Проверим таблицу маршрутизации протокола OSPFv3 (рис. [-@fig:65]).

![Проверка таблицы маршрутизации протокола OSPFv3](image/65.png){#fig:65 width=70%}

Предположим, что пакет проходит через маршрутизатор msk-aamishina-gw-02. Отключим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:66]).

![Отключение интерфейса на маршрутизаторе 2](image/66.png){#fig:66 width=70%}

Проверим таблицу маршрутизации протокола OSPFv3 (рис. [-@fig:67]).

![Проверка таблицы маршрутизации протокола OSPFv3](image/67.png){#fig:67 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов. Примерное время засечь не удалось, но маршрут восстановился (рис. [-@fig:68]).

![Команды ping и trace с PC1](image/68.png){#fig:68 width=70%}

Включим на маршрутизаторе msk-aamishina-gw-02 интерфейс (рис. [-@fig:69]).

![Включение интерфейса на маршрутизаторе 2](image/69.png){#fig:69 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:70]).

![Команды ping и trace с PC1](image/70.png){#fig:70 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:71]). Видим протокол OSPF. В сетях IPv6 применяется OSPFv3 — протокол маршрутизации на основе состояния канала. OSPFv3 разделяет сеть на несколько областей и использует групповой трафик для отправки обновлений маршрутизации и подтверждений. В качестве группового адреса для маршрутизатора OSPF используется адрес FF02::5 (224.0.0.5), для выделенного маршрутизатора (designated router, DR) — FF02::6 (224.0.0.6).

![Захваченный трафик](image/71.png){#fig:71 width=70%}

## Построение туннеля IPv6–IPv4

Повторяем топологию сети (рис. [-@fig:72]).

![Топология моделируемой сети в GNS3](image/72.png){#fig:72 width=70%}

Присвоим адреса оконечным устройствам PC1 и PC2 в соответствии с данными (рис. [-@fig:73]), (рис. [-@fig:74]).

![Присвоение IPv4-адреса PC1](image/73.png){#fig:73 width=70%}

![Присвоение IPv4-адреса PC2](image/74.png){#fig:74 width=70%}

На маршрутизаторах перейдем в режим конфигурирования, изменим имя устройства на aamishina (рис. [-@fig:75]).

![Смена имени устройства](image/75.png){#fig:75 width=70%}

Настройим адреса на интерфейсах маршрутизаторов (рис. [-@fig:76]), (рис. [-@fig:77]), (рис. [-@fig:78]).

![Настройка адреса на интерфейсах маршрутизатора 1](image/76.png){#fig:76 width=70%}

![Настройка адреса на интерфейсах маршрутизатора 2](image/77.png){#fig:77 width=70%}

![Настройка адреса на интерфейсах маршрутизатора 3](image/78.png){#fig:78 width=70%}

Убедимся, что на PC появились адреса ближайших к ним маршрутизаторов (рис. [-@fig:79]).

![Проверка появившихся маршрутизаторов](image/79.png){#fig:79 width=70%}

Проверим маршруты с маршрутизатора R1 (рис. [-@fig:80]).

![Проверка маршрутов с маршрутизатора 1](image/80.png){#fig:80 width=70%}

Настроим маршрутизацию IPv4 (рис. [-@fig:81]), (рис. [-@fig:82]), (рис. [-@fig:83]).

![Настройка маршрутизации IPv4](image/81.png){#fig:81 width=70%}

![Настройка маршрутизации IPv4](image/82.png){#fig:82 width=70%}

![Настройка маршрутизации IPv4](image/83.png){#fig:83 width=70%}

Проверим маршруты с маршрутизатора R1 (рис. [-@fig:84]).

![Проверка маршрутов с маршрутизатора 1](image/84.png){#fig:84 width=70%}

Как мы видим изначально не пинговались интерфейсы 2ого и 3его маршрутизаторов (20.0.0.1 и 20.0.0.2), потому что маршрутизатор не знал что куда отправлять. После добавления протокола рип пропинговать удалось.

Создадим туннель IPv6 через сеть IPv4 (рис. [-@fig:85]), (рис. [-@fig:86]).

![Создание туннеля IPv6 через сеть IPv4](image/85.png){#fig:85 width=70%}

![Создание туннеля IPv6 через сеть IPv4](image/86.png){#fig:86 width=70%}

Настроим статическую маршрутизацию IPv6 (рис. [-@fig:87]), (рис. [-@fig:88]).

![Настройка статической маршрутизации IPv6](image/87.png){#fig:87 width=70%}

![Настройка статической маршрутизации IPv6](image/88.png){#fig:88 width=70%}

Проверим доступность оконечных устройств (рис. [-@fig:89]), (рис. [-@fig:90]).

![Проверка доступности PC1](image/89.png){#fig:89 width=70%}

![Проверка доступности PC2](image/90.png){#fig:90 width=70%}

Просмотрим захваченный трафик в Wireshark. На первом скриншоте виден пакет ICMPv6 (рис. [-@fig:91]). Видим, что пакет ICMP6 вмонтирован в пакет IPv6, а IPv6 инкапсулирован в пакет IPv4. Также видим ICMPv6 от команды trace (рис. [-@fig:92]), где прослеживается такое же вложение. Также замечаем RIPv2, который рассматривали ранее (рис. [-@fig:93]), используется 520 UDP порт, а также многоадресная рассылка по адресу 224.0.0.9.

![ICMPv6 пакет](image/91.png){#fig:91 width=70%}

![ICMPv6 пакет](image/92.png){#fig:92 width=70%}

![RIPv2 пакет](image/93.png){#fig:93 width=70%}

# Самостоятельная работа

Для начала требовалось разработать таблицу адресации по таблице адресов сетей (табл. [-@tbl:1]). Изначально я разработала ее для чуть иной расстановки gw-0x (не как в таблице), но заметила это уже во время выполнения. В итоге я ориентировалась на таблицу адресации (табл. [-@tbl:2]).

: Таблица адресов сетей {#tbl:1}

| Устройства  | Сеть IPv4     | Сеть IPv6         |
|-------------|---------------|-------------------|
| PC1–gw-01   | 10.10.1.96/27 | 2001:db8:1:1::/64 |
| PC2–gw-03   | 10.10.1.64/28 | 2001:db8:1:6::/64 |
| gw-01–gw-02 | 10.10.1.4/30  | 2001:db8:1:2::/64 |
| gw-02–gw-03 | 10.10.1.8/30  | 2001:db8:1:3::/64 |
| gw-03–gw-04 | 10.10.1.16/30 | 2001:db8:1:4::/64 |
| gw-04–gw-01 | 10.10.1.32/30 | 2001:db8:1:5::/64 |

: Таблица адресации {#tbl:2}

| Устройство  | Интерфейс  | Адрес IP/префикс     | Шлюз по умолчанию | Следующее устройство |
|-------------|------------|----------------------|-------------------|----------------------|
| **gw-01**   | eth0       | 10.10.1.97/27       | n/a               | PC1                   |
| **gw-01**   | eth0       | 2001:db8:1:1::1/64  | n/a               | PC1                   |
| **gw-01**   | eth1       | 10.10.1.5/30        | n/a               | gw-02                 |
| **gw-01**   | eth1       | 2001:db8:1:2::1/64  | n/a               | gw-02                 |
| **gw-01**   | eth2       | 10.10.1.33/30       | n/a               | gw-04                 |
| **gw-01**   | eth2       | 2001:db8:1:5::1/64  | n/a               | gw-04                 |
| **gw-02**   | eth0       | 10.10.1.6/30        | n/a               | gw-01                 |
| **gw-02**   | eth0       | 2001:db8:1:2::2/64  | n/a               | gw-01                 |
| **gw-02**   | eth1       | 10.10.1.17/30       | n/a               | gw-03                 |
| **gw-02**   | eth1       | 2001:db8:1:4::1/64  | n/a               | gw-03                 |
| **gw-03**   | eth0       | 10.10.1.65/28       | n/a               | PC2                   |
| **gw-03**   | eth0       | 2001:db8:1:6::1/64  | n/a               | PC2                   |
| **gw-03**   | eth1       | 10.10.1.18/30       | n/a               | gw-02                 |
| **gw-03**   | eth1       | 2001:db8:1:4::2/64  | n/a               | gw-02                 |
| **gw-03**   | eth2       | 10.10.1.9/30        | n/a               | gw-04                 |
| **gw-03**   | eth2       | 2001:db8:1:3::1/64  | n/a               | gw-04                 |
| **gw-04**   | eth0       | 10.10.1.10/30       | n/a               | gw-03                 |
| **gw-04**   | eth0       | 2001:db8:1:3::2/64  | n/a               | gw-03                 |
| **gw-04**   | eth1       | 10.10.1.34/30       | n/a               | gw-01                 |
| **gw-04**   | eth1       | 2001:db8:1:5::2/64  | n/a               | gw-01                 |
| **PC1**     | NIC        | 10.10.1.98/27       | 10.10.1.97        | gw-01                 |
| **PC1**     | NIC        | 2001:db8:1:1::2/64  | n/a               | gw-01                 |
| **PC2**     | NIC        | 10.10.1.66/28       | 10.10.1.65        | gw-03                 |
| **PC2**     | NIC        | 2001:db8:1:6::2/64  | n/a               | gw-03                 |

Выполнение не особо отличается от предыдущих действий.

## Настройка динамической маршрутизации в сетях IPv4 и IPv6

Повторяем топологию сети (рис. [-@fig:94]).

![Топология моделируемой сети в GNS3](image/94.png){#fig:94 width=70%}

Присваиваем IPv4-адреса оконечным устройствам PC1 и PC2 в соответствии с данными (рис. [-@fig:95]), (рис. [-@fig:96]).

![Присвоение IPv4-адреса PC1](image/95.png){#fig:95 width=70%}

![Присвоение IPv4-адреса PC2](image/96.png){#fig:96 width=70%}

Настроим IPv4-адреса на интерфейсах маршрутизаторов (рис. [-@fig:97]), (рис. [-@fig:98]), (рис. [-@fig:99]), (рис. [-@fig:100]).

![Настройка IPv4-адреса на интерфейсе маршрутизатора 1](image/5.png){#fig:97 width=70%}

![Настройка IPv4-адреса на интерфейсе маршрутизатора 2](image/6.png){#fig:98 width=70%}

![Настройка IPv4-адреса на интерфейсе маршрутизатора 3](image/7.png){#fig:99 width=70%}

![Настройка IPv4-адреса на интерфейсе маршрутизатора 4](image/8.png){#fig:100 width=70%}

Присвоим IPv6-адреса оконечным устройствам PC1 и PC2 в соответствии с данными (рис. [-@fig:101]).

![Присвоение IPv6-адреса PC1](image/101.png){#fig:101 width=70%}

Настроим IPv6-адреса на интерфейсах маршрутизаторов (рис. [-@fig:102]), (рис. [-@fig:103]), (рис. [-@fig:104]), (рис. [-@fig:105]).

![Настройка IPv6-адреса на интерфейсе маршрутизатора 1](image/102.png){#fig:102 width=70%}

![Настройка IPv6-адреса на интерфейсе маршрутизатора 2](image/103.png){#fig:103 width=70%}

![Настройка IPv6-адреса на интерфейсе маршрутизатора 3](image/104.png){#fig:104 width=70%}

![Настройка IPv6-адреса на интерфейсе маршрутизатора 4](image/105.png){#fig:105 width=70%}

### Настройка динамической маршрутизации по протоколу RIP

На маршрутизаторах настроим RIP в качестве протокола динамической
маршрутизации (рис. [-@fig:106]), (рис. [-@fig:107]), (рис. [-@fig:108]).

![Настройка RIP на маршрутизаторе 1](image/106.png){#fig:106 width=70%}

![Настройка RIP на маршрутизаторе 2](image/107.png){#fig:107 width=70%}

![Настройка RIP на маршрутизаторе 3](image/108.png){#fig:108 width=70%}

Проверим пути прохождения пакетов: с PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:109]).

![Команды ping и trace с PC1](image/109.png){#fig:109 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:110]). Видим протокол RIPv2, значит действия выполнены правильно.

![Захваченный трафик](image/110.png){#fig:110 width=70%}

На маршрутизаторах настройим RIPng для сетей IPv6 (рис. [-@fig:111]), (рис. [-@fig:112]), (рис. [-@fig:113]), (рис. [-@fig:114]).

![Настройка RIPng для сетей IPv6 на маршрутизаторе 1](image/111.png){#fig:111 width=70%}

![Настройка RIPng для сетей IPv6 на маршрутизаторе 2](image/112.png){#fig:112 width=70%}

![Настройка RIPng для сетей IPv6 на маршрутизаторе 3](image/113.png){#fig:113 width=70%}

![Настройка RIPng для сетей IPv6 на маршрутизаторе 4](image/114.png){#fig:114 width=70%}

Проверим пути прохождения пакетов: с PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:115]).

![Команды ping и trace с PC1](image/115.png){#fig:115 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:116]). Видим протокол RIPng, значит действия выполнены правильно.

![Захваченный трафик](image/116.png){#fig:116 width=70%}

### Настройка динамической маршрутизации по протоколу OSPF

На маршрутизаторах настроим OSPFv2 для сетей IPv4 (рис. [-@fig:117]), (рис. [-@fig:118]), (рис. [-@fig:119]), (рис. [-@fig:120]).

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 1](image/117.png){#fig:117 width=70%}

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 2](image/118.png){#fig:118 width=70%}

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 3](image/119.png){#fig:119 width=70%}

![Настройка OSPFv2 для сетей IPv4 на маршрутизаторе 4](image/120.png){#fig:120 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:121]).

![Команды ping и trace с PC1](image/121.png){#fig:121 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:122]). Видим протокол OSPF, значит действия выполнены правильно.

![Захваченный трафик](image/122.png){#fig:122 width=70%}

На маршрутизаторах настроим OSPFv3 для сетей IPv6 (рис. [-@fig:123]), (рис. [-@fig:124]), (рис. [-@fig:125]), (рис. [-@fig:126]).

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 1](image/123.png){#fig:123 width=70%}

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 2](image/124.png){#fig:124 width=70%}

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 3](image/125.png){#fig:125 width=70%}

![Настройка OSPFv3 для сетей IPv6 на маршрутизаторе 4](image/126.png){#fig:126 width=70%}

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:127]).

![Команды ping и trace с PC1](image/127.png){#fig:127 width=70%}

Посмотрим захваченный на соединениях трафик в Wireshark (рис. [-@fig:128]). Видим протокол OSPF, значит действия выполнены правильно.

![Захваченный трафик](image/128.png){#fig:128 width=70%}

# Выводы

В ходе выполнения лабораторной работы мной были изучены принципы маршрутизации в IPv4- и IPv6-сетях и принципы настройки сетевого оборудования.